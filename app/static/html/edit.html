<!-- quiz edit page -->

<div id='edit-page' class='view row'>

<div id='build-container' class='col-md-9'>

	<section id='preview-widget'>
		<div class="huffpostlabs-quiz" ng-class="{'mobile':viewMobile}" id="{{quiz._id}}"></div>
		<script src="/widget/q.js"></script>
	</section>

	<!-- ********************* set-quiz *********************  -->
	<section id='set-quiz'>
		<edit-quiz-partial></edit-quiz-partial>

		<button ng-disabled="(!quiz.saved || quiz.saved!='unsaved')" ng-click="saveQuiz()" class='btn btn-sm btn-success'>SAVE QUIZ</button>
		<p ng-class="{'error': (quiz.saved=='error')}" class='inline-block btn-helper saved-status-text'>{{quiz.saved}}</p>
	</section> 
	<!-- ********************* set-quiz *********************  -->

	<!-- ********************* set-outcomes *********************  -->
	<section id='set-outcomes'>
		<h3>
			<button ng-show="!hideOutcomes" ng-click="hideOutcomes=true" class='btn btn-default hide-show-btn'> - </button>
			<button ng-show="hideOutcomes" ng-click="hideOutcomes=false" class='btn btn-default hide-show-btn'> + </button>
			Outcomes
			<em class='instructions-text'>({{quiz.outcomeList.length}})</em>
		</h3>
		<span ng-show="!hideOutcomes">
		<div class="outcome" ng-class="{'editing':(outcome.editing)}" ng-repeat="outcome in quiz.outcomeList">
			<p class='bold display-inline'>{{$index + 1}}.</p>
			<p class="bold error display-inline" ng-show="outcome.error.empty">Hey this outcome is empty</p>

			<div class='remove-edit-btns'>
				<p ng-show="outcome.answerList.length==1" class='display-inline btn-helper'>1 answer references this outcome</p>
				<p ng-show="outcome.answerList.length>1" class='display-inline btn-helper'>{{outcome.answerList.length}} answers reference this outcome</p>
				<button ng-show="!outcome.answerList.length" ng-disabled="outcome.answerList.length>0" ng-click="removeOutcome(outcome)" class='btn btn-xs btn-danger remove-outcome'>X</button>
				
				<button ng-show="!outcome.editing" ng-click="outcome.editing=true" class='btn btn-xs btn-warning edit-outcome'>EDIT</button>
				<button ng-show="outcome.editing&&outcome._id" ng-click="outcome.editing=false" class='btn btn-xs btn-warning'> - </button>

				<button ng-show="outcome.editing" ng-disabled="outcome.saved!='unsaved'" ng-click="saveOutcome(outcome)" class='btn btn-xs btn-success edit-outcome'>SAVE</button>
			</div>

			<span ng-show="outcome.editing==true" class='edit-outcome-container'>			
				<label>Text</label>
				<input ng-change="outcome.saved='unsaved';outcome.error.text=false" ng-class="{'error':outcome.error.text}" type='text' ng-model='outcome.text' />

				<label>Description</label>
				<textarea ng-change="outcome.saved='unsaved'" ng-model='outcome.description'></textarea>

				<img-input-label max-size="600" model="outcome"></img-input-label>
				<input ng-change="outcome.saved='unsaved'" id='outcome-pic-url' type="url" ng-model="outcome.pic_url" placeholder="http://dogecoin.com/img/dogecoin-300.png">

				<span ng-show="outcome.pic_url || outcome.pic_credit">
					<label>Photo Credit</label>
					<input ng-change="outcome.saved='unsaved'" id='new-outcome-pic-credit' type='text' ng-model='outcome.pic_credit' />

					<label>Image/GIF styling</label>
					<select ng-change="outcome.saved='unsaved'" class="popover-hover" data-original-title="Image/GIF Styling" data-container="body" data-toggle="popover" data-placement="right" data-content="Default: bottom-right" ng-model='outcome.pic_style' ng-options="s for s in ['bottom-right', 'float-right', 'cover', 'contain']" >
					</select>
				</span>
			</span>
			{{outcome}}
			<div class="huffpostlabs-quiz quiz-edit" ng-class="{'mobile':viewMobile}">
				<div class="slides-container">
					<!-- directive fills in the content -->
					<div outcome-container class="slide outcome-container"></div>
				</div>
			</div>
		</div>

		<button ng-click="quiz.outcomeList.push({new:true,editing:true,saved:'unsaved'})" id='add-outcome-btn' class='btn btn-sm btn-default'>+ Add New Outcome</button>
		</span> <!-- hide-show-outcomes -->
		
	</section> <!-- ********************* set-outcomes *********************  -->

	<!-- ********************* set-questions *********************  -->
	<section id='set-questions' class="popover-hover" data-original-title="Question" data-container="body" data-toggle="popover" data-placement="right" data-content="A quiz must have at least 1 question.  Questions can currently have 2-4 answers.  We are in the process of making this number unlimited.">
		<h3>
			<button ng-show="!hideQuestions" ng-click="hideQuestions=true" class='btn btn-default hide-show-btn'> - </button>
			<button ng-show="hideQuestions" ng-click="hideQuestions=false" class='btn btn-default hide-show-btn'> + </button>
			Questions
			<em class='instructions-text'>({{quiz.questionList.length}})</em>
		</h3>

		<span ng-show="!hideQuestions">
			<edit-questions-partial></edit-questions-partial>
		</span> <!-- hide/show questions -->

	</section> <!-- ********************* set-questions *********************  -->


	<section id='preview-again'>
		<button ng-click="scrollToTop()" class='btn btn-info btn-lg'>View Newly Saved Quiz</button>
	</section> <!-- ********************* preview-again *********************  -->


</div> <!-- #build-container col-md-9 -->

<div id='helper-container' class='col-md-3'>
	
	<button ng-show="!viewMobile" ng-click="viewMobile=true" class='btn btn-default'>View Mobile Version</button>
	<button ng-show="viewMobile" ng-click="viewMobile=false" class='btn btn-default'>View Non-Mobile Version</button>

	<section id='instructions'>
		<h4>Documentation</h4>
		<ul>
			<li ng-repeat="(docString,doc) in docDictionary">
				<a target="_blank" ng-href="/documentation/{{docString}}">{{doc.title}}</a>
			</li>
			<li>
				<a target="_blank" href="/documentation">All Documentation</a>
			</li>
		</ul>
		<h5>Basics:</h5>
		<div class='instructions-text'>
			<p>All changes saved on this page will immediately go live.</p>
			<p>Here's how it works:<ul>
				<li>You create a set of 'outcomes' -- the possible results of the quiz.</li>
				<li>You create a series of questions and each of those questions has a set of answers.  If a user picks a given answer, that answer adds a 'point' to one of the outcomes you created.</li>
				<li>At the end of the quiz, whichever outcome has the most 'points' will be the outcome for that user.  (Avoid the possibility of a tie).  You create the outcomes, the questions, the answers, and decide which outcome a given answer adds a 'point' to.</li>
			</ul></p>

			<p>Quiz dimensions:
				<ul>
					<li>Full size: 550px x 425px</li>
					<li>Mobile size: 300px x 270px</li>
				</ul>
			</p>

			<p>YOU ARE HELD RESPONSIBLE FOR ADHERING TO PHOTO STANDARDS AND ATTRIBUTING CREDIT.</p>

			<p>After you create the quiz you can customize how it is shared on Facebook</p>
		</div>
	</section>
</div> <!-- col-md-3 on the right -->

<link href="/widget/widget.css" rel="stylesheet">
</div>